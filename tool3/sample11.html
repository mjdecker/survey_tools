<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>Tool3</title></head><head></head><body><div style="font-family: courier, monospace;"><table style="border-collapse: collapse;"><tr><td style="border: 1px solid black;"><table><tr><th><strong>Original</strong></th></tr><tr><td><pre><span><span style="color: grey"> 1 </span></span><span><span style="background-color: transparent">public void expandFolds(int foldLevel, boolean update)</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 2 </span></span><span><span style="background-color: transparent">{</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 3 </span></span><span><span style="background-color: transparent">  if(buffer.getFoldHandler() instanceof IndentFoldHandler)</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 4 </span></span><span><span style="background-color: transparent">    foldLevel = (foldLevel - 1) * buffer.getIndentSize() + 1;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 5 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">   </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">   </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 6 </span></span><span><span style="background-color: transparent">  showLineRange(0,</span></span><span style="color:grey; text-decoration: line-through;"><span style="color: black; background-color: rgb(255,187,187); font-weight: bold;">buffer.getLineCount() - 1</span></span><span><span style="background-color: transparent">);</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 7 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 8 </span></span><span><span style="background-color: transparent">  int leastFolded = -1;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 9 </span></span><span><span style="background-color: transparent">  int firstInvisible = 0;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">10 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">11 </span></span><span><span style="background-color: transparent">  for(int i = 0; i &lt; </span></span><span style="color:grey; text-decoration: line-through;"><span style="color: black; background-color: rgb(255,187,187); font-weight: bold;">buffer.getLineCount()</span></span><span><span style="background-color: transparent">; i++)</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">12 </span></span><span><span style="background-color: transparent">  {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">   </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">13 </span></span><span><span style="background-color: transparent">    if (leastFolded == -1 || </span></span><span style="color:grey; text-decoration: line-through;"><span style="color: black; background-color: rgb(255,187,187); font-weight: bold;">buffer.getFoldLevel(i)</span></span><span><span style="background-color: transparent"> &lt; leastFolded)</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">14 </span></span><span><span style="background-color: transparent">    {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">15 </span></span><span><span style="background-color: transparent">      leastFolded = </span></span><span style="color:grey; text-decoration: line-through;"><span style="color: black; background-color: rgb(255,187,187); font-weight: bold;">buffer.getFoldLevel(i)</span></span><span><span style="background-color: transparent">;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">16 </span></span><span><span style="background-color: transparent">    }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">17 </span></span><span><span style="background-color: transparent">  </span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">18 </span></span><span><span style="background-color: transparent">    if (</span></span><span style="color:grey; text-decoration: line-through;"><span style="color: black; background-color: rgb(255,187,187); font-weight: bold;">buffer.getFoldLevel(i)</span></span><span><span style="background-color: transparent"> &lt; foldLevel ||</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">19 </span></span><span><span style="background-color: transparent">        </span></span><span style="color:grey; text-decoration: line-through;"><span style="color: black; background-color: rgb(255,187,187); font-weight: bold;">buffer.getFoldLevel(i)</span></span><span><span style="background-color: transparent"> == leastFolded)</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">20 </span></span><span><span style="background-color: transparent">    {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">21 </span></span><span><span style="background-color: transparent">      if(firstInvisible != i)</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">22 </span></span><span><span style="background-color: transparent">      {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">23 </span></span><span><span style="background-color: transparent">        hideLineRange(firstInvisible,</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">24 </span></span><span><span style="background-color: transparent">          i - 1);</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">25 </span></span><span><span style="background-color: transparent">      }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">26 </span></span><span><span style="background-color: transparent">      firstInvisible = i + 1;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">27 </span></span><span><span style="background-color: transparent">    }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">28 </span></span><span><span style="background-color: transparent">  }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">29 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">30 </span></span><span><span style="background-color: transparent">  if(firstInvisible != </span></span><span style="color:grey; text-decoration: line-through;"><span style="color: black; background-color: rgb(255,187,187); font-weight: bold;">buffer.getLineCount()</span></span><span><span style="background-color: transparent">)</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">31 </span></span><span><span style="background-color: transparent">    hideLineRange(firstInvisible,</span></span><span style="color:grey; text-decoration: line-through;"><span style="color: black; background-color: rgb(255,187,187); font-weight: bold;">buffer.getLineCount() - 1</span></span><span><span style="background-color: transparent">);</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">32 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">33 </span></span><span><span style="background-color: transparent">  notifyScreenLineChanges();</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">34 </span></span><span><span style="background-color: transparent">  if(update &amp;&amp; textArea.getDisplayManager() == this)</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">35 </span></span><span><span style="background-color: transparent">  {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">36 </span></span><span><span style="background-color: transparent">    textArea.foldStructureChanged();</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">37 </span></span><span><span style="background-color: transparent">  }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">38 </span></span><span><span style="background-color: transparent">}</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">39 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span></pre></td></tr></table></td><td style="border: 1px solid black; border-collapse: collapse;"><table><tr><th><strong>Modified</strong></th></tr><tr><td><pre><span><span style="color: grey"> 1 </span></span><span><span style="background-color: transparent">public void expandFolds(int foldLevel, boolean update)</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 2 </span></span><span><span style="background-color: transparent">{</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 3 </span></span><span><span style="background-color: transparent">  if(buffer.getFoldHandler() instanceof IndentFoldHandler)</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 4 </span></span><span><span style="background-color: transparent">    foldLevel = (foldLevel - 1) * buffer.getIndentSize() + 1;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 5 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 6 </span></span><span><span style="background-color: transparent">  </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">int lineCount = buffer.getLineCount();</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 7 </span></span><span><span style="background-color: transparent">  </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">int end = lineCount - 1;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 8 </span></span><span><span style="background-color: transparent">  showLineRange(0,</span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">end</span></span><span><span style="background-color: transparent">);</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 9 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">10 </span></span><span><span style="background-color: transparent">  int leastFolded = -1;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">11 </span></span><span><span style="background-color: transparent">  int firstInvisible = 0;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">12 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">13 </span></span><span><span style="background-color: transparent">  for(int i = 0; i &lt; </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">lineCount</span></span><span><span style="background-color: transparent">; i++)</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">14 </span></span><span><span style="background-color: transparent">  {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">15 </span></span><span><span style="background-color: transparent">    </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">int level = buffer.getFoldLevel(i);</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">16 </span></span><span><span style="background-color: transparent">    if (leastFolded == -1 || </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">level</span></span><span><span style="background-color: transparent"> &lt; leastFolded)</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">17 </span></span><span><span style="background-color: transparent">    {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">18 </span></span><span><span style="background-color: transparent">      leastFolded = </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">level</span></span><span><span style="background-color: transparent">;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">19 </span></span><span><span style="background-color: transparent">    }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">20 </span></span><span><span style="background-color: transparent">  </span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">21 </span></span><span><span style="background-color: transparent">    if (</span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">level</span></span><span><span style="background-color: transparent"> &lt; foldLevel ||</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">21 </span></span><span><span style="background-color: transparent"> </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">level</span></span><span><span style="background-color: transparent"> == leastFolded)</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">22 </span></span><span><span style="background-color: transparent">    {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">23 </span></span><span><span style="background-color: transparent">      if(firstInvisible != i)</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">24 </span></span><span><span style="background-color: transparent">      {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">25 </span></span><span><span style="background-color: transparent">        hideLineRange(firstInvisible,</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">26 </span></span><span><span style="background-color: transparent">          i - 1);</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">27 </span></span><span><span style="background-color: transparent">      }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">28 </span></span><span><span style="background-color: transparent">      firstInvisible = i + 1;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">29 </span></span><span><span style="background-color: transparent">    }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">30 </span></span><span><span style="background-color: transparent">  }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">31 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">32 </span></span><span><span style="background-color: transparent">  if(firstInvisible != </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">lineCount</span></span><span><span style="background-color: transparent">)</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">33 </span></span><span><span style="background-color: transparent">    hideLineRange(firstInvisible,</span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">end</span></span><span><span style="background-color: transparent">);</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">34 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">35 </span></span><span><span style="background-color: transparent">  notifyScreenLineChanges();</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">36 </span></span><span><span style="background-color: transparent">  if(update &amp;&amp; textArea.getDisplayManager() == this)</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">37 </span></span><span><span style="background-color: transparent">  {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">38 </span></span><span><span style="background-color: transparent">    textArea.foldStructureChanged();</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">39 </span></span><span><span style="background-color: transparent">  }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">40 </span></span><span><span style="background-color: transparent">}</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">41 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span></pre></td></tr></table></td></tr></table></div></body></html>