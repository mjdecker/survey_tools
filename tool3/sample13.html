<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>Tool3</title></head><head></head><body><div style="font-family: courier, monospace;"><table style="border-collapse: collapse;"><tr><td style="border: 1px solid black;"><table><tr><th><strong>Original</strong></th></tr><tr><td><pre><span><span style="color: grey"> 1 </span></span><span><span style="background-color: transparent">@Beta</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 2 </span></span><span><span style="background-color: transparent">@Nullable</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 3 </span></span><span><span style="background-color: transparent">@CheckForNull</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 4 </span></span><span><span style="background-color: transparent">public static Long tryParse(String string) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 5 </span></span><span><span style="background-color: transparent">  if (checkNotNull(string).isEmpty()) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 6 </span></span><span><span style="background-color: transparent">    return null;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 7 </span></span><span><span style="background-color: transparent">  }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"></span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"></span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"></span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"></span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 8 </span></span><span><span style="background-color: transparent">  boolean negative = string.charAt(0) == '-';</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 9 </span></span><span><span style="background-color: transparent">  int index = negative ? 1 : 0;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">10 </span></span><span><span style="background-color: transparent">  if (index == string.length()) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">11 </span></span><span><span style="background-color: transparent">    return null;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">12 </span></span><span><span style="background-color: transparent">  }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">13 </span></span><span><span style="background-color: transparent">  int digit = string.charAt(index++) </span></span><span style="color:grey; text-decoration: line-through;"><span style="color: black; background-color: rgb(255,187,187); font-weight: bold;">- '0'</span></span><span><span style="background-color: transparent">;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">14 </span></span><span><span style="background-color: transparent">  if (digit &lt; 0 || digit </span></span><span style="color:grey; text-decoration: line-through;"><span style="color: black; background-color: rgb(255,187,187); font-weight: bold;">&gt;</span></span><span><span style="background-color: transparent"> </span></span><span style="color:grey; text-decoration: line-through;"><span style="color: black; background-color: rgb(255,187,187); font-weight: bold;">9</span></span><span><span style="background-color: transparent">) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">15 </span></span><span><span style="background-color: transparent">    return null;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">16 </span></span><span><span style="background-color: transparent">  }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">17 </span></span><span><span style="background-color: transparent">  long accum = -digit;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"></span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"></span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"></span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">18 </span></span><span><span style="background-color: transparent">  while (index &lt; string.length()) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">19 </span></span><span><span style="background-color: transparent">    digit = string.charAt(index++) </span></span><span style="color:grey; text-decoration: line-through;"><span style="color: black; background-color: rgb(255,187,187); font-weight: bold;">- '0'</span></span><span><span style="background-color: transparent">;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">20 </span></span><span><span style="background-color: transparent">    if (digit &lt; 0 || digit </span></span><span style="color:grey; text-decoration: line-through;"><span style="color: black; background-color: rgb(255,187,187); font-weight: bold;">&gt;</span></span><span><span style="background-color: transparent"> </span></span><span style="color:grey; text-decoration: line-through;"><span style="color: black; background-color: rgb(255,187,187); font-weight: bold;">9</span></span><span><span style="background-color: transparent"> || accum &lt; </span></span><span style="color:grey; text-decoration: line-through;"><span style="color: black; background-color: rgb(255,187,187); font-weight: bold;">Long.MIN_VALUE / 10</span></span><span><span style="background-color: transparent">) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">21 </span></span><span><span style="background-color: transparent">      return null;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">22 </span></span><span><span style="background-color: transparent">    }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">23 </span></span><span><span style="background-color: transparent">    accum *= </span></span><span style="color:grey; text-decoration: line-through;"><span style="color: black; background-color: rgb(255,187,187); font-weight: bold;">10</span></span><span><span style="background-color: transparent">;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">24 </span></span><span><span style="background-color: transparent">    if (accum &lt; Long.MIN_VALUE + digit) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">25 </span></span><span><span style="background-color: transparent">      return null;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">26 </span></span><span><span style="background-color: transparent">    }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">27 </span></span><span><span style="background-color: transparent">    accum -= digit;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">28 </span></span><span><span style="background-color: transparent">  }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">29 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">30 </span></span><span><span style="background-color: transparent">  if (negative) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">31 </span></span><span><span style="background-color: transparent">    return accum;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">32 </span></span><span><span style="background-color: transparent">  } else if (accum == Long.MIN_VALUE) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">33 </span></span><span><span style="background-color: transparent">    return null;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">34 </span></span><span><span style="background-color: transparent">  } else {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">35 </span></span><span><span style="background-color: transparent">    return -accum;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">36 </span></span><span><span style="background-color: transparent">  }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">37 </span></span><span><span style="background-color: transparent">}</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">38 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span></pre></td></tr></table></td><td style="border: 1px solid black; border-collapse: collapse;"><table><tr><th><strong>Modified</strong></th></tr><tr><td><pre><span><span style="color: grey"> 1 </span></span><span><span style="background-color: transparent">@Beta</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 2 </span></span><span><span style="background-color: transparent">@Nullable</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 3 </span></span><span><span style="background-color: transparent">@CheckForNull</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 4 </span></span><span><span style="background-color: transparent">public static Long tryParse(String string</span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">, int radix</span></span><span><span style="background-color: transparent">) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 5 </span></span><span><span style="background-color: transparent">  if (checkNotNull(string).isEmpty()) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 6 </span></span><span><span style="background-color: transparent">    return null;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 7 </span></span><span><span style="background-color: transparent">  }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 8 </span></span><span><span style="background-color: transparent">  </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">if (radix &lt; Character.MIN_RADIX || radix &gt; Character.MAX_RADIX) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey"> 9 </span></span><span><span style="background-color: transparent">    </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">throw new IllegalArgumentException(</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">10 </span></span><span><span style="background-color: transparent">        </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">"radix must be between MIN_RADIX and MAX_RADIX but was " + radix);</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">11 </span></span><span><span style="background-color: transparent">  </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">}</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">12 </span></span><span><span style="background-color: transparent">  boolean negative = string.charAt(0) == '-';</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">13 </span></span><span><span style="background-color: transparent">  int index = negative ? 1 : 0;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">14 </span></span><span><span style="background-color: transparent">  if (index == string.length()) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">15 </span></span><span><span style="background-color: transparent">    return null;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">16 </span></span><span><span style="background-color: transparent">  }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">17 </span></span><span><span style="background-color: transparent">  int digit = </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">digit(</span></span><span><span style="background-color: transparent">string.charAt(index++)</span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">)</span></span><span><span style="background-color: transparent"> ;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">18 </span></span><span><span style="background-color: transparent">  if (digit &lt; 0 || digit </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">&gt;=</span></span><span><span style="background-color: transparent"> </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">radix</span></span><span><span style="background-color: transparent">) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">19 </span></span><span><span style="background-color: transparent">    return null;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">20 </span></span><span><span style="background-color: transparent">  }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">21 </span></span><span><span style="background-color: transparent">  long accum = -digit;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">22 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">23 </span></span><span><span style="background-color: transparent">  </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">long cap = Long.MIN_VALUE / radix;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">24 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">25 </span></span><span><span style="background-color: transparent">  while (index &lt; string.length()) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">26 </span></span><span><span style="background-color: transparent">    digit = </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">digit(</span></span><span><span style="background-color: transparent">string.charAt(index++)</span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">)</span></span><span><span style="background-color: transparent">;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">27 </span></span><span><span style="background-color: transparent">    if (digit &lt; 0 || digit </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">&gt;=</span></span><span><span style="background-color: transparent"> </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">radix</span></span><span><span style="background-color: transparent"> || accum &lt; </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">cap</span></span><span><span style="background-color: transparent">) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">28 </span></span><span><span style="background-color: transparent">      return null;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">29 </span></span><span><span style="background-color: transparent">    }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">30 </span></span><span><span style="background-color: transparent">    accum *= </span></span><span><span style="background-color: rgb(0,250,108)  ; font-weight: bold;">radix</span></span><span><span style="background-color: transparent">;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">31 </span></span><span><span style="background-color: transparent">    if (accum &lt; Long.MIN_VALUE + digit) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">32 </span></span><span><span style="background-color: transparent">      return null;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">33 </span></span><span><span style="background-color: transparent">    }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">34 </span></span><span><span style="background-color: transparent">    accum -= digit;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">35 </span></span><span><span style="background-color: transparent">  }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">36 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">37 </span></span><span><span style="background-color: transparent">  if (negative) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">38 </span></span><span><span style="background-color: transparent">    return accum;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">39 </span></span><span><span style="background-color: transparent">  } else if (accum == Long.MIN_VALUE) {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">40 </span></span><span><span style="background-color: transparent">    return null;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">41 </span></span><span><span style="background-color: transparent">  } else {</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">42 </span></span><span><span style="background-color: transparent">    return -accum;</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">43 </span></span><span><span style="background-color: transparent">  }</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">44 </span></span><span><span style="background-color: transparent">}</span></span><span><span style="background-color: transparent">
</span></span><span><span style="color: grey">45 </span></span><span><span style="background-color: transparent"></span></span><span><span style="background-color: transparent">
</span></span></pre></td></tr></table></td></tr></table></div></body></html>